{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../App.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onMount, onDestroy } from \"svelte\";\n\n  onMount(function(){\n    document.addEventListener('keydown', function(event) {\n      if (event.code == 'ArrowDown' || event.code == 'ArrowUp'\n       || event.code == 'ArrowLeft' || event.code == 'ArrowRight'\n      ) event.preventDefault();\n\n      if (event.code == 'ArrowDown') {\n        curVerseIndex = Math.min(curVerseIndex+1, curVerses.length-1);\n        scrollToCurrentVerse();\n      } else if (event.code == 'ArrowUp') {\n        curVerseIndex = Math.max(curVerseIndex-1, 0);\n        scrollToCurrentVerse();\n      } else if (event.code == 'ArrowLeft') {\n        curSongIndex = Math.max(curSongIndex-1, 0);\n      } else if (event.code == 'ArrowRight') {\n        curSongIndex = Math.min(curSongIndex+1, playlist.length-1);\n      }\n    });\n  });\n\n  /* Synced variables */\n  let shown = false;\n  let line1 = '';\n  let line2 = '';\n  let bodyclass = '';\n  \n  let songs = [\n    {\n      name: \"A Safe Stronghold Our God is Still\",\n      author: \"Martin Luther\",\n      order: \"s1 s2 s3 s1 s1 s2 s3 s3 s3\",\n      verses: {\n        s1: `As safe a stronghold our God is still,\nA trusty shield and weapon;\nHe’ll help us clear from all the ill\nThat hath us now o’ertaken.\nThe ancient prince of hell\nHath risen with purpose fell;\nStrong mail of craft and power\nHe weareth in this hour;\nOn earth is not His fellow.`,\n        s2: `With force of arms we nothing can,\nFull soon were we down-ridden;\nBut for us fights the proper Man,\nWhom God Himself hath bidden.\nAsk ye: Who is this same?\nChrist Jesus is His name,\nThe Lord Sabaoth’s Son;\nHe, and no other one,\nShall conquer in the battle.`,\n        s3: `And were this world all devils o’er,\nAnd watching to devour us,\nWe lay it not to heart so sore;\nNot they can overpower us.\nAnd let the prince of ill\nLook grim as e’er he will,\nHe harms us not a whit;\nFor why? his doom is writ;\nA word shall quickly slay him.`\n      }\n    }\n  ];\n  let songsByName = new Map();\n  let songFilter = \"\";\n  let filteredSongs = songs;\n\n  let playlist = [\n    songs[0],\n  ];\n  let curSongIndex = 0;\n  let curSong = playlist[curSongIndex];\n  let curVerses = curSong.verses || [];\n  let curVerseIndex = 0;\n  let curVerse;\n  \n\n  GUN_SUPER_PEERS = GUN_SUPER_PEERS || ['http://127.0.0.1/gun'];\n  let gun = Gun(GUN_SUPER_PEERS);\n  let overlay = gun.get('songs').get(window.location.hash || 'demo');\n  overlay.get('show').on(function(data, key){shown = data});\n  let overlaySong = overlay.get('song');\n  overlaySong.on(function(data, key){curSong[key] = data});\n  let overlayLine1 = overlay.get('line1');\n  overlayLine1.on(function(data){line1 = data});\n  let overlayLine2 = overlay.get('line2');\n  overlayLine2.on(function(data){line2 = data});\n  let overlayBodyClass = overlay.get('bodyclass');\n  overlayBodyClass.on(function(data){bodyclass = data});\n\n  $: curSong = playlist[curSongIndex];\n  $: curVerses = getSongVerses(curSong);\n  $: curVerse = curVerses[curVerseIndex];\n  $: overlaySong.put(curSongIndex);\n  $: overlayLine1.put(curVerse);\n  // $: overlayLine2.put(addressContent(curSongIndex));\n  $: filteredSongs = songFilter ? songs.filter(matchesSong) : songs;\n\n  function getSongVerses(song) {\n    let verses = [];\n    song && song.order.split(' ').forEach(id => {\n      if (song.verses[id]) {\n        verses.push(song.verses[id]);\n      }\n    });\n    return verses;\n  }\n\n  function matchesSong(song) {\n    const prefix = songFilter.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase();\n    const nameLower = song.name.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase();\n    return (\n      nameLower.startsWith(prefix) ||\n      (prefix.length >= 2 && nameLower.includes(' '+prefix))\n    );\n  }\n\n  function addToPlaylist(song) {\n    playlist.push(song);\n    playlist = playlist;\n  }\n\n  function playlistRemover(songIndex) {\n    return function() {\n      playlist = playlist.filter((h, j) => (songIndex !== j));\n    }\n  }\n\n  function songSelector(i) {\n    return function() {curSongIndex = i}\n  }\n\n  function verseSelector(i) {\n    return function() {curVerseIndex = i}\n  }\n\n  function scrollToCurrentVerse() {\n    document.querySelector('.verse-item:nth-child('+curVerseIndex+')').scrollIntoView();\n  }\n\n  function toggleShow() {\n    shown = !shown;\n    overlay.get('show').put(shown);\n  }\n</script>\n\n<style>\n  :global(body) {\n    color: white;\n  }\n  .control-button {\n    width: 6rem;\n    /* float: right; */\n  }\n  .songs-filter {\n    display: block;\n    width: 100%;\n    margin: 0 1% 0 0;\n    padding: 0;\n    max-height: 10rem;\n    max-width: 30rem;\n    overflow: scroll;\n  }\n  .song-item {\n    width: 100%;\n    margin: 0 0 .25rem 0;\n    padding: 0 .5rem;\n    text-align: left;\n  }\n  .song-item {\n    width: 100%;\n    margin: 0 0 .25rem 0;\n    max-width: 30rem;\n  }\n  .song-set {\n    width: auto;\n    padding: 0 .5rem;\n    margin: 0;\n    text-align: left;\n  }\n  .song-remove {\n    margin: 0;\n    max-width: 2rem;\n    padding: .25rem .5rem;\n  }\n  .verse-item {\n    padding: .25rem .5rem;\n    margin: 0;\n  }\n  button {\n    margin: 0;\n    line-height: 2rem;\n  }\n</style>\n\n<div class=\"input-group\" style=\"width: 100%; display: flex;\">\n  <input class=\"form-control\" type=\"text\" placeholder=\"filter\" bind:value={songFilter} />\n  <button type=\"button\" class=\"form-control btn btn-secondary\" on:click={()=>{songFilter=''}} style=\"max-width: 2rem;\">×</button>\n</div>\n<div class=\"songs-filter\">\n  {#each filteredSongs as song}\n    <button class=\"song-item btn\" class:btn-primary={song==curSong} on:click={()=>addToPlaylist(song)}>{song.name}</button>\n  {/each}\n</div>\n\n<div class=\"playlist\">\n  Playlist:<br>\n  {#each playlist as song, i}\n  <div class=\"song-item btn-group\">\n    <button class=\"song-set btn\" class:btn-primary={curSongIndex==i} on:click={songSelector(i)}>{song.name||'--'}</button>\n    <button class=\"btn song-remove\" on:click={playlistRemover(i)}>×</button>\n  </div>\n  {/each}\n</div>\n\n<div class=\"verses\">\n  {#each curVerses as verse, i}\n    <p class=\"verse-item\" class:btn-primary={curVerseIndex==i} on:click={verseSelector(i)}>\n    {@html verse.replace(/\\n/g,'<br>')}\n    </p>\n  {/each}\n</div>\n\n<div style=\"display: inline-block; margin: 0 .5rem 0 0; vertical-align: top;\">\n  <button class=\"control-button btn\" on:click={toggleShow} class:btn-danger={shown} class:btn-success={!shown}>\n    {#if shown}Skryť{:else}Zobraziť{/if}\n  </button>\n</div>\n<div style=\"display: inline-block;\">\n  <button class=\"btn btn-primary\"\n          on:click={function(){curSongIndex -= 1}}\n          disabled={curSongIndex <= 0}>Predošlá pieseň</button>\n  <button class=\"btn btn-primary\"\n          on:click={function(){curSongIndex += 1}}\n          disabled={curSongIndex >= playlist.length-1}>Ďalšia pieseň</button>\n\n  <button class=\"btn btn-primary\"\n          on:click={function(){curVerseIndex -= 1}}\n          disabled={curVerseIndex <= 0}>Predošlý verš</button>\n  <button class=\"btn btn-primary\"\n          on:click={function(){curVerseIndex += 1}}\n          disabled={curVerseIndex >= curVerses.length-1}>Ďalší verš</button>\n</div>\n\n<p class=\"bodyclass\">\n  Téma:\n  <select bind:value={bodyclass} on:change=\"{() => overlayBodyClass.put(bodyclass)}\">\n    <option value=\"\" selected>Predvolené</option>\n    <option value=\"simple-with-shadow\">Jednoduché s tieňom</option>\n    <option value=\"fullscreen-white-bg\">Fullscreen biele pozadie</option>\n  </select>\n</p>\n"
  ],
  "names": [],
  "mappings": "AAqJU,IAAI,AAAE,CAAC,AACb,KAAK,CAAE,KAAK,AACd,CAAC,AACD,eAAe,cAAC,CAAC,AACf,KAAK,CAAE,IAAI,AAEb,CAAC,AACD,aAAa,cAAC,CAAC,AACb,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAChB,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,KAAK,CACjB,SAAS,CAAE,KAAK,CAChB,QAAQ,CAAE,MAAM,AAClB,CAAC,AACD,UAAU,cAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CACpB,OAAO,CAAE,CAAC,CAAC,KAAK,CAChB,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,UAAU,cAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CACpB,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,SAAS,cAAC,CAAC,AACT,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,CAAC,CAAC,KAAK,CAChB,MAAM,CAAE,CAAC,CACT,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,YAAY,cAAC,CAAC,AACZ,MAAM,CAAE,CAAC,CACT,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,MAAM,CAAC,KAAK,AACvB,CAAC,AACD,WAAW,cAAC,CAAC,AACX,OAAO,CAAE,MAAM,CAAC,KAAK,CACrB,MAAM,CAAE,CAAC,AACX,CAAC,AACD,MAAM,cAAC,CAAC,AACN,MAAM,CAAE,CAAC,CACT,WAAW,CAAE,IAAI,AACnB,CAAC"
}